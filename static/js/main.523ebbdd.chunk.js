(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,,function(t,e,n){t.exports={item:"CartItem_item__2N5Aj",details:"CartItem_details__1-rwW",quantity:"CartItem_quantity__3ZMDg",price:"CartItem_price__2RSJf",itemprice:"CartItem_itemprice__1MO55",actions:"CartItem_actions__RpbTg"}},,,,function(t,e,n){t.exports={item:"ProductItem_item__envhn",price:"ProductItem_price__2xRqC",actions:"ProductItem_actions__3Uu04"}},,function(t,e,n){t.exports={cart:"Cart_cart__2jcqi",close:"Cart_close___rg_V"}},,function(t,e,n){t.exports={button:"CartButton_button__11IRY",badge:"CartButton_badge__uWpzD"}},function(t,e,n){t.exports={card:"Card_card__3E8Qm"}},,function(t,e,n){t.exports={header:"MainHeader_header__2AYlf"}},function(t,e,n){t.exports={products:"Products_products__2IA8m"}},,,,,function(t,e,n){},,,,,,,,,function(t,e,n){"use strict";n.r(e);var c=n(9),r=n.n(c),a=(n(23),n(0)),i=n(15),s=n.n(i),o=n(1),u=function(t){return Object(o.jsx)("section",{className:"".concat(s.a.card," ").concat(t.className?t.className:""),children:t.children})},d=n(12),l=n.n(d),j=n(7),p=Object(j.b)({name:"cart",initialState:{items:[],totalAmount:0,totalQuantity:0,postRequestIsNeeded:!1},reducers:{updatedReduxStore:function(t,e){t.items=e.payload.items,t.totalAmount=e.payload.totalAmount,t.totalQuantity=e.payload.totalQuantity},addItemToCart:function(t,e){t.totalAmount=t.totalAmount+e.payload.price,t.totalQuantity++;var n=t.items.find((function(t){return t.id===e.payload.id}));n?(n.totalPrice=n.totalPrice+e.payload.price,n.quantity++):t.items.push({id:e.payload.id,title:e.payload.title,price:e.payload.price,quantity:1,totalPrice:e.payload.price}),t.postRequestIsNeeded=!0},removeItemFromCart:function(t,e){var n=t.items.find((function(t){return t.id===e.payload}));1===n.quantity?t.items=t.items.filter((function(t){return t.id!==e.payload})):(n.totalPrice=n.totalPrice-n.price,n.quantity--),t.totalAmount=t.totalAmount-n.price,t.totalQuantity--,t.postRequestIsNeeded=!0}}}),b=p.actions,m=p,h=n(2),f=n(6),x=n.n(f),O=function(t){var e=t.item,n=e.title,c=e.quantity,r=e.totalPrice,a=e.price,i=e.id,s=Object(h.b)();return Object(o.jsxs)("li",{className:x.a.item,children:[Object(o.jsxs)("header",{children:[Object(o.jsx)("h3",{children:n}),Object(o.jsxs)("div",{className:x.a.price,children:["$",r.toFixed(2)," ",Object(o.jsxs)("span",{className:x.a.itemprice,children:["($",a.toFixed(2),"/\u043d\u0430\u0431\u043e\u0440)"]})]})]}),Object(o.jsxs)("div",{className:x.a.details,children:[Object(o.jsxs)("div",{className:x.a.quantity,children:["x ",Object(o.jsx)("span",{children:c})]}),Object(o.jsxs)("div",{className:x.a.actions,children:[Object(o.jsx)("button",{onClick:function(){s(b.removeItemFromCart(i))},children:"-"}),Object(o.jsx)("button",{onClick:function(){s(b.addItemToCart({id:i,title:n,price:a}))},children:"+"})]})]})]})},_=n(35),y=Object(j.b)({name:"ui",initialState:{cartIsShown:!1},reducers:{toggleCart:function(t,e){t.cartIsShown=!t.cartIsShown}}}),v=y.actions,C=y,I=function(){var t=Object(h.c)((function(t){return t.cart.items})),e=Object(h.b)();return Object(o.jsx)(_.a.div,{initial:{y:"-100vh"},animate:{y:0},children:Object(o.jsxs)(u,{className:l.a.cart,children:[Object(o.jsx)("h2",{children:"\u0412\u0410\u0428\u0418 \u041f\u041e\u041a\u0423\u041f\u041a\u0418"}),Object(o.jsx)("ul",{children:t.map((function(t){return Object(o.jsx)(O,{item:{id:t.id,title:t.title,quantity:t.quantity,totalPrice:t.totalPrice,price:t.price}},t.id)}))}),Object(o.jsx)("span",{className:l.a.close,onClick:function(){e(v.toggleCart())},children:"X"})]})})},N=n(14),g=n.n(N),w=function(){var t=Object(h.b)(),e=Object(h.c)((function(t){return t.cart.totalQuantity}));return Object(o.jsxs)("button",{className:g.a.button,onClick:function(){t(v.toggleCart())},children:[Object(o.jsx)("span",{children:"My Cart"}),Object(o.jsx)("span",{className:g.a.badge,children:e})]})},k=n(17),q=n.n(k),P=function(t){return Object(o.jsxs)("header",{className:q.a.header,children:[Object(o.jsx)("h1",{children:"ReduxCart"}),Object(o.jsx)("nav",{children:Object(o.jsx)("ul",{children:Object(o.jsx)("li",{children:Object(o.jsx)(w,{})})})})]})},A=function(t){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(P,{}),Object(o.jsx)("main",{children:t.children})]})},R=n(10),S=n.n(R),Q=function(t){var e=t.title,n=t.price,c=t.description,r=t.id,a=Object(h.b)();return Object(o.jsx)("li",{className:S.a.item,children:Object(o.jsxs)(u,{children:[Object(o.jsxs)("header",{children:[Object(o.jsx)("h3",{children:e}),Object(o.jsxs)("div",{className:S.a.price,children:["$",n.toFixed(2)]})]}),Object(o.jsx)("p",{children:c}),Object(o.jsx)("div",{className:S.a.actions,children:Object(o.jsx)("button",{onClick:function(){a(b.addItemToCart({id:r,title:e,price:n}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})})},E=n(18),F=n.n(E),T=[{id:"m1",title:"\u0421\u0443\u0448\u0438 \u0424\u0438\u043b\u0430\u0434\u0435\u043b\u044c\u0444\u0438\u044f",price:10,description:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043b\u0443\u0447\u0448\u0438\u0435 \u0441\u0443\u0448\u0438 \u0432 \u043c\u0438\u0440\u0435"},{id:"m2",title:"\u0421\u0443\u0448\u0438 \u043a\u0430\u043b\u0438\u0444\u043e\u0440\u043d\u0438\u044f",price:20,description:"\u0422\u043e\u0436\u0435 \u043d\u0435\u043f\u043b\u043e\u0445\u0438\u0435 \u0441\u0443\u0448\u0438"}],D=function(){return Object(o.jsxs)("section",{className:F.a.products,children:[Object(o.jsx)("h2",{children:"\u0412\u044b\u0431\u0438\u0440\u0430\u0439\u0442\u0435 \u0412\u0430\u0448\u0438 \u043b\u044e\u0431\u0438\u043c\u044b\u0435 \u0441\u0443\u0448\u0438"}),Object(o.jsx)("ul",{children:T.map((function(t){return Object(o.jsx)(Q,{id:t.id,title:t.title,price:t.price,description:t.description},t.id)}))})]})},B=n(5),J=n.n(B),M=n(8);var $=function(){var t=Object(h.b)(),e=Object(h.c)((function(t){return t.ui.cartIsShown})),n=Object(h.c)((function(t){return t.cart}));return Object(a.useEffect)((function(){t(function(){var t=Object(M.a)(J.a.mark((function t(e){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=Object(M.a)(J.a.mark((function t(){var n,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://react-app5-default-rtdb.firebaseio.com/sushi.json");case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Data loading is failed");case 5:return t.next=7,n.json();case 7:c=t.sent,e(b.updatedReduxStore({items:c.items||[],totalQuantity:c.totalQuantity,totalAmount:c.totalAmount}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=1,t.next=4,n();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(a.useEffect)((function(){n.postRequestIsNeeded&&t(function(t){return function(){var e=Object(M.a)(J.a.mark((function e(n){var c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){var e=Object(M.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-app5-default-rtdb.firebaseio.com/sushi.json",{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Data sending to DB is failed");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,c();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}(n))}),[n,t]),Object(o.jsxs)(A,{children:[e&&Object(o.jsx)(I,{}),Object(o.jsx)(D,{})]})},U=Object(j.a)({reducer:{cart:m.reducer,ui:C.reducer}});r.a.render(Object(o.jsx)(h.a,{store:U,children:Object(o.jsx)($,{})}),document.getElementById("root"))}],[[32,1,2]]]);
//# sourceMappingURL=main.523ebbdd.chunk.js.map